### testing that photometry routines work well
### based on date from vosa
from oivis.oiphot import photometry
import matplotlib.pyplot as plt
import numpy as np

def test_get_filter_info():
    '''test_get_filter_info Demonstrating extraction of filter information
    '''    
    filterlist = ['OAF/Bessell.U','OAF/Bessell.V','2MASS/2MASS.H', '2MASS/2MASS.J', '2MASS/2MASS.Ks']
    filterdata = photometry.get_filter_data(filterlist)
    plt.figure(1)
    ax = plt.subplot(111)
    for i,filt in enumerate(filterlist):
        print("---------------------------------")
        print("Selected the following filter {0}".format(filt))
        print("---------------------------------")
        print("Filter wavelength {} m".format(filterdata[i]['waveff']))
        print("Filter width {} m".format(filterdata[i]['width']))
        print("Filter zero point {} Jy".format(filterdata[i]['zp_jy']))
        ax.plot(filterdata[i]['wavel'] / 10000., filterdata[i]['trans'], label=filterdata[i]['name'])
    ax.legend()
    
def test_convert_magnitudes_nphotons():
    '''demo_convert_magnitudes_nphotons demonstration on how to convert magnitudes to photon fluxes
    '''    
    filterlist = ['OAF/Bessell.U','OAF/Bessell.V','2MASS/2MASS.H','2MASS/2MASS.J', '2MASS/2MASS.Ks']
    magarr = np.array([0,0,0,0,0])
    photonflux = photometry.mag_to_nphot(filterlist, magarr)
    for i, mag in enumerate(magarr):
        print("{0} magnitude in filter {1} represents {2} photons.s-1.m-2".format(mag,\
             filterlist[i], photonflux[i]))